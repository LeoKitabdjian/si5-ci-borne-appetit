let json = [{
    "_id": "650404b97a9a24d8341a48c2",
    "fullName": "Homemade foie gras terrine",
    "shortName": "foie gras",
    "price": 18,
    "category": "STARTER",
    "image": "https://cdn.pixabay.com/photo/2016/11/12/15/28/restaurant-1819024_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48c5",
    "fullName": "Soft-boiled egg breaded with breadcrumbs and nuts",
    "shortName": "soft-boiled egg",
    "price": 16,
    "category": "STARTER",
    "image": "https://cdn.pixabay.com/photo/2019/06/03/22/06/eggs-4250077_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48c8",
    "fullName": "Goat cheese foom from \"Valbonne goat farm\"",
    "shortName": "goat cheese",
    "price": 15,
    "category": "STARTER",
    "image": "https://cdn.pixabay.com/photo/2016/09/15/19/24/salad-1672505_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48cb",
    "fullName": "Homemade dill salmon gravlax",
    "shortName": "salmon",
    "price": 16,
    "category": "STARTER",
    "image": "https://cdn.pixabay.com/photo/2014/11/05/15/57/salmon-518032_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48ce",
    "fullName": "Crab maki with fresh mango",
    "shortName": "crab maki",
    "price": 16,
    "category": "STARTER",
    "image": "https://cdn.pixabay.com/photo/2016/03/05/22/23/asian-1239269_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48d1",
    "fullName": "Burrata Mozzarella",
    "shortName": "burrata",
    "price": 16,
    "category": "STARTER",
    "image": "https://cdn.pixabay.com/photo/2021/02/08/12/40/burrata-5994616_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48d4",
    "fullName": "Delicious Pizza Regina",
    "shortName": "pizza",
    "price": 12,
    "category": "MAIN",
    "image": "https://cdn.pixabay.com/photo/2020/02/27/20/13/cake-4885715_1280.jpg"
}, {
    "_id": "650404b97a9a24d8341a48d7",
    "fullName": "Lasagna al forno",
    "shortName": "lasagna",
    "price": 18,
    "category": "MAIN",
    "image": "https://cdn.pixabay.com/photo/2017/02/15/15/17/meal-2069021_1280.jpg"
}, {
    "_id": "650404b97a9a24d8341a48da",
    "fullName": "Homemade beef burger",
    "shortName": "beef burger",
    "price": 19,
    "category": "MAIN",
    "image": "https://cdn.pixabay.com/photo/2022/01/17/19/24/burger-6945571_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48dd",
    "fullName": "Beef chuck cooked 48 hours at low temperature",
    "shortName": "beef chuck",
    "price": 24,
    "category": "MAIN",
    "image": "https://cdn.pixabay.com/photo/2017/01/23/15/36/eat-2002918_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48e0",
    "fullName": "Half cooked tuna and octopus grilled on the plancha",
    "shortName": "half cooked tuna",
    "price": 23,
    "category": "MAIN",
    "image": "https://cdn.pixabay.com/photo/2019/09/20/05/53/tuna-4490877_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48e3",
    "fullName": "Brownie (home made)",
    "shortName": "brownie",
    "price": 6.5,
    "category": "DESSERT",
    "image": "https://cdn.pixabay.com/photo/2014/11/28/08/03/brownie-548591_1280.jpg"
}, {
    "_id": "650404b97a9a24d8341a48e6",
    "fullName": "Valrhona chocolate declination with salted chocolate ice cream",
    "shortName": "chocolate",
    "price": 12,
    "category": "DESSERT",
    "image": "https://cdn.pixabay.com/photo/2020/07/31/11/53/ice-cream-5452794_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48e9",
    "fullName": "Marmalade of Menton's lemon - Lemon cream - Limoncello jelly and sorbet - Homemade meringue",
    "shortName": "lemon",
    "price": 12,
    "category": "DESSERT",
    "image": "https://cdn.pixabay.com/photo/2018/05/01/18/19/eat-3366425_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48ec",
    "fullName": "Fresh raspberries and peaches",
    "shortName": "rasp and peaches",
    "price": 12,
    "category": "DESSERT",
    "image": "https://cdn.pixabay.com/photo/2020/05/15/17/28/fruit-plate-5174414_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48ef",
    "fullName": "Dessert of fresh strawberries and vanilla mascarpone mousse",
    "shortName": "strawberries",
    "price": 12,
    "category": "DESSERT",
    "image": "https://cdn.pixabay.com/photo/2018/04/09/18/20/strawberry-3304967_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48f2",
    "fullName": "Fresh seasonal fruit",
    "shortName": "seasonal fruit",
    "price": 12,
    "category": "DESSERT",
    "image": "https://cdn.pixabay.com/photo/2016/08/09/19/03/fruit-1581400_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48f5",
    "fullName": "Speculoos tiramisu",
    "shortName": "tiramisu",
    "price": 10,
    "category": "DESSERT",
    "image": "https://cdn.pixabay.com/photo/2017/03/19/18/22/italian-food-2157246_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48f8",
    "fullName": "Bottled coke (33cl)",
    "shortName": "coke",
    "price": 3.5,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2019/11/14/15/47/coke-4626458_1280.jpg"
}, {
    "_id": "650404b97a9a24d8341a48fb",
    "fullName": "Ice Tea (33cl)",
    "shortName": "ice tea",
    "price": 3.5,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2022/04/11/08/52/iced-tea-7125271_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a48fe",
    "fullName": "Bottled water",
    "shortName": "bottled water",
    "price": 1,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2014/12/11/09/49/water-564048_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a4901",
    "fullName": "Sparkling water",
    "shortName": "sparkling water",
    "price": 1.5,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2018/10/23/19/39/water-3768773_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a4904",
    "fullName": "Spritz",
    "shortName": "spritz",
    "price": 5,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2020/05/12/21/17/spritz-5164971_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a4907",
    "fullName": "Margarita",
    "shortName": "margarita",
    "price": 6.5,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2014/08/11/08/37/margarita-415360_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a490a",
    "fullName": "Tequila sunrise",
    "shortName": "tequila",
    "price": 7,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2018/01/25/19/33/summer-3106910_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a490d",
    "fullName": "Mojito",
    "shortName": "mojito",
    "price": 6,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2015/03/30/12/35/mojito-698499_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a4910",
    "fullName": "Martini",
    "shortName": "martini",
    "price": 7,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2015/10/19/07/50/cocktail-995574_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a4913",
    "fullName": "Lemonade",
    "shortName": "lemonade",
    "price": 3,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2016/07/21/11/17/drink-1532300_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a4916",
    "fullName": "Apple juice",
    "shortName": "apple juice",
    "price": 3,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2016/11/28/22/07/punch-1866178_960_720.jpg"
}, {
    "_id": "650404b97a9a24d8341a4919",
    "fullName": "Café",
    "shortName": "café",
    "price": 1.8,
    "category": "BEVERAGE",
    "image": "https://cdn.pixabay.com/photo/2014/12/11/02/56/coffee-563797_960_720.jpg"
}]

export const getItems = (): any => {
    let items = {};
    json.forEach(item => {
        // @ts-ignore
        items[item._id] = {
            name: item.fullName,
            shortName: item.shortName,
            price: item.price,
            category: item.category,
            image: item.image,
        };
    })
    return items;
}

export const findItems = (str: string): any => {
    let items = getItems();
    let foundItems = {};
    Object.keys(items).forEach(key => {
        if (items[key].name.toLowerCase().includes(str.toLowerCase())) {
            // @ts-ignore
            foundItems[key] = items[key];
        }
    })
    return foundItems;
}

export const getMenu = (): Menu => {
    let menu: Menu = [];
    let categories = new Set<string>();
    json.forEach(item => {
        categories.add(item.category);
    })
    categories.forEach(category => {
        let items: ItemList = {};
        json.forEach(item => {
            if (item.category === category) {
                items[item._id] = {
                    name: item.fullName,
                    price: item.price,
                    image: item.image,
                };
            }
        })
        menu.push({
            id: category,
            items: items,
        })
    })
    menu.forEach(category => {
        const itemsArray = Object.entries(category.items).map(([key, item]) => ({ key, item }));

        itemsArray.sort((a, b) => {
            if (a.item.name < b.item.name) return -1;
            if (a.item.name > b.item.name) return 1;
            return 0;
        });

        let sortedItems: { [key: string]: any } = {};
        itemsArray.forEach(({ key, item }) => {
            sortedItems[key] = item;
        });
        category.items = sortedItems;
    });
    return menu;
}